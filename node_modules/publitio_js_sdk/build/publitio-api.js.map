{"version":3,"sources":["../src/publitio-api.js"],"names":["PublitioAPI","key","secret","version","API","VERSION","url","URL","call","method","args","Error","helper","createUrl","callApi","catch","error","file","action","checkAction","getUrlForFileCreation","uploadFile","Object","values","ACTIONS","includes","publitioApi"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;IAEqBA,W;;;AACnB,uBAAaC,GAAb,EAAkBC,MAAlB,EAA0B;AAAA;;AACxB,SAAKC,OAAL,GAAeC,eAAIC,OAAnB;AACA,SAAKC,GAAL,GAAWF,eAAIG,GAAf;AACA,SAAKN,GAAL,GAAWA,GAAX;AACA,SAAKC,MAAL,GAAcA,MAAd;AACD;;;;8BAEU;AACT,aAAO,KAAKC,OAAZ;AACD;;;yBAEKK,K,EAAiC;AAAA,UAA3BC,MAA2B,uEAAlB,KAAkB;AAAA,UAAXC,IAAW,uEAAJ,EAAI;;AACrC,UAAI,OAAOF,KAAP,KAAgB,QAApB,EAA8B;AAC5B,cAAM,IAAIG,KAAJ,CAAU,0CAAV,CAAN;AACD;;AAED,UAAI,OAAOF,MAAP,KAAkB,QAAlB,IAA8B,OAAOA,MAAP,KAAkB,WAApD,EAAiE;AAC/D,cAAM,IAAIE,KAAJ,CAAU,wDAAV,CAAN;AACD;;AAED,UAAML,GAAG,GAAGM,eAAOC,SAAP,CAAiBL,KAAjB,EAAuBE,IAAvB,EAA6B,KAAKJ,GAAlC,EAAuC,KAAKL,GAA5C,EAAiD,KAAKC,MAAtD,EAA8D,KAAKC,OAAnE,CAAZ;;AACA,aAAOS,eAAOE,OAAP,CAAeR,GAAf,EAAoBG,MAApB,EACJM,KADI,CACE,UAACC,KAAD,EAAW;AAAE,cAAMA,KAAN;AAAa,OAD5B,CAAP;AAED;;;+BAEWC,I,EAAkC;AAAA,UAA5BC,MAA4B,uEAAnB,MAAmB;AAAA,UAAXR,IAAW,uEAAJ,EAAI;AAC5C,WAAKS,WAAL,CAAiBD,MAAjB;;AAEA,UAAMZ,GAAG,GAAGM,eAAOQ,qBAAP,CAA6BF,MAA7B,EAAqCR,IAArC,EAA2C,KAAKJ,GAAhD,EAAqD,KAAKL,GAA1D,EAA+D,KAAKC,MAApE,EAA4E,KAAKC,OAAjF,CAAZ;;AACA,aAAOS,eAAOS,UAAP,CAAkBJ,IAAlB,EAAwBX,GAAxB,EACJS,KADI,CACE,UAACC,KAAD,EAAW;AAAE,cAAMA,KAAN;AAAa,OAD5B,CAAP;AAED;;;uCAE6C;AAAA,UAA5BE,MAA4B,uEAAnB,MAAmB;AAAA,UAAXR,IAAW,uEAAJ,EAAI;AAC5C,WAAKS,WAAL,CAAiBD,MAAjB;;AAEA,UAAMZ,GAAG,GAAGM,eAAOQ,qBAAP,CAA6BF,MAA7B,EAAqCR,IAArC,EAA2C,KAAKJ,GAAhD,EAAqD,KAAKL,GAA1D,EAA+D,KAAKC,MAApE,EAA4E,KAAKC,OAAjF,CAAZ;;AACA,aAAOS,eAAOE,OAAP,CAAeR,GAAf,EAAoB,MAApB,EACJS,KADI,CACE,UAACC,KAAD,EAAW;AAAE,cAAMA,KAAN;AAAa,OAD5B,CAAP;AAED;;;gCAEYE,M,EAAQ;AACnB,UAAI,CAACI,MAAM,CAACC,MAAP,CAAcC,kBAAd,EAAuBC,QAAvB,CAAgCP,MAAhC,CAAL,EAA8C;AAC5C,cAAM,IAAIP,KAAJ,yDAA2DW,MAAM,CAACC,MAAP,CAAcC,kBAAd,CAA3D,EAAN;AACD;AACF;;;;;;;;AAGI,SAASE,WAAT,CAAsBzB,GAAtB,EAA2BC,MAA3B,EAAmC;AACxC,SAAO,IAAIF,WAAJ,CAAgBC,GAAhB,EAAqBC,MAArB,CAAP;AACD","sourcesContent":["import { helper } from './helper'\nimport { API, ACTIONS } from './constants'\n\nexport default class PublitioAPI {\n  constructor (key, secret) {\n    this.version = API.VERSION\n    this.url = API.URL\n    this.key = key\n    this.secret = secret\n  }\n\n  version () {\n    return this.version\n  }\n\n  call (call, method = 'GET', args = {}) {\n    if (typeof call !== 'string') {\n      throw new Error('First parameter to call must be a string')\n    }\n\n    if (typeof method !== 'string' && typeof method !== 'undefined') {\n      throw new Error('Second parameter to call must be a string or undefined')\n    }\n\n    const url = helper.createUrl(call, args, this.url, this.key, this.secret, this.version)\n    return helper.callApi(url, method)\n      .catch((error) => { throw error })\n  }\n\n  uploadFile (file, action = 'file', args = {}) {\n    this.checkAction(action)\n\n    const url = helper.getUrlForFileCreation(action, args, this.url, this.key, this.secret, this.version)\n    return helper.uploadFile(file, url)\n      .catch((error) => { throw error })\n  }\n\n  uploadRemoteFile (action = 'file', args = {}) {\n    this.checkAction(action)\n\n    const url = helper.getUrlForFileCreation(action, args, this.url, this.key, this.secret, this.version)\n    return helper.callApi(url, 'POST')\n      .catch((error) => { throw error })\n  }\n\n  checkAction (action) {\n    if (!Object.values(ACTIONS).includes(action)) {\n      throw new Error(`Second parameter to uploadFile must be one of ${Object.values(ACTIONS)}`)\n    }\n  }\n}\n\nexport function publitioApi (key, secret) {\n  return new PublitioAPI(key, secret)\n}\n"],"file":"publitio-api.js"}